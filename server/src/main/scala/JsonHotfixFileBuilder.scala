// Copyright 2014 Foursquare Labs Inc. All Rights Reserved.
package com.foursquare.twofishes

import com.foursquare.common.thrift.json.TReadableJSONProtocol
import java.io.{File, FileOutputStream}
import org.apache.thrift.TSerializer

// TODO(rahul): come up with better tooling for building hotfix files
object JsonHotfixFileBuilder {
  // build individual objects here and run build-hotfix-file.py to produce json file
  // DO NOT push commits with changes to this list back to twofishes
  val edits: List[GeocodeServingFeatureEdit] = List(
    GeocodeServingFeatureEdit.newBuilder
      .editType(EditType.Add)
      .longId(504403158265495553L)
      .cc("US")
      .center(GeocodePoint(44.09855774869064, -70.6640625))
      .wktGeometry("POLYGON((-67.0166015625 44.674756693822985,-66.884765625 44.81521071019733,-67.21435546875 45.28092607428939,-67.412109375 45.24999635129111,-67.4560546875 45.68147902880878,-67.763671875 45.71217284793295,-67.763671875 47.12084053349137,-68.3349609375 47.433893516613324,-68.92822265625 47.24031721435103,-69.10400390625 47.522997114890885,-70.048828125 46.67040739005173,-70.2685546875 46.24658794952197,-70.33447265625 45.88068771486556,-70.7958984375 45.54314834228157,-71.0595703125 45.31183894528331,-71.3232421875 45.31183894528331,-71.56494140625 45.0485423744132,-73.2952880859375 45.016818851172395,-73.3831787109375 44.603729513313674,-73.2733154296875 44.46668237734754,-73.4326171875 44.073342114057226,-73.4051513671875 43.57796592626361,-73.2623291015625 43.621723979321644,-73.27880859375 42.73245043053935,-73.5260009765625 42.04680691730825,-73.5589599609375 41.28767474997743,-73.4930419921875 41.21333570868988,-73.76495361328125 41.08223020058201,-73.6138916015625 40.95167294204782,-71.90826416015625 41.313692769062214,-69.76593017578125 41.21459475559082,-69.83734130859375 42.190658969876594,-70.42236328125 42.105131974667685,-70.55694580078125 42.88278828453775,-67.0166015625 44.674756693822985))")
      .woeType(YahooWoeType.COLLOQUIAL)
      .namesEdits(List(
        FeatureNameListEdit.newBuilder
          .editType(EditType.Add)
          .lang("en")
          .name("New England")
          .flagsEdits(List(FeatureNameFlagsListEdit(EditType.Add, FeatureNameFlags.PREFERRED)))
          .result()
      ))
      .result(),
    GeocodeServingFeatureEdit.newBuilder
      .editType(EditType.Add)
      .longId(504403158265495554L)
      .cc("FR")
      .center(GeocodePoint(43.68686692247307, 4.844970703125))
      .wktGeometry("POLYGON((7.5201416015625 43.78850742049093,7.49267578125 43.87964455777681,7.723388671875 44.06939541871056,7.6629638671875 44.195559123175066,7.3828125 44.136453445318544,6.888427734375 44.360739934836836,7.0806884765625 44.701422851215405,6.9873046875 44.861283663665525,6.7840576171875 44.91576890432117,6.624755859375 45.125442797234,6.4599609375 45.09830616504266,6.470947265625 45.06339725005746,6.3555908203125 45.07503592497075,6.328125 45.12156692546175,6.21826171875 45.125442797234,6.1907958984375 45.01293560631896,6.35009765625 44.853495844692944,5.9820556640625 44.83402168913308,5.60302734375 44.61155103634376,5.4052734375 44.415697010760596,5.6854248046875 44.21524785489476,5.38330078125 44.19162058716275,5.0372314453125 44.345028435700904,5.108642578125 44.42746681370313,4.89990234375 44.43531203263603,4.844970703125 44.345028435700904,4.921875 44.2821403186695,4.8284912109375 44.250670988641325,4.779052734375 44.345028435700904,4.449462890625 44.35681245494036,4.273681640625 44.32538313851754,4.075927734375 44.37252079496486,3.8836669921875 44.7599598611031,3.6199951171875 44.904097840445665,3.4716796875 44.830126068057815,3.40576171875 44.974088674896514,3.109130859375 44.900206959172806,2.9718017578125 44.66627220762665,3.076171875 44.4745223307428,3.1475830078125 44.24673613781966,3.3673095703125 44.17980339980738,3.2464599609375 44.073342114057226,3.4332275390625 44.01411404983676,3.3233642578125 43.91922598567497,3.1915283203125 43.83211211207478,3.05419921875 43.84003681749167,3.05419921875 43.70120253782304,2.911376953125 43.70120253782304,2.7850341796875 43.637628108122975,2.63671875 43.6694237402931,2.5982666015625 43.56204601681667,2.6531982421875 43.4624512523339,2.26318359375 43.4624512523339,2.2137451171875 43.39064126007936,2.032470703125 43.44251257751495,1.8402099609375 43.44251257751495,1.669921875 43.266768822629906,1.7303466796875 43.16268104109336,1.9500732421875 43.10656019204472,1.9720458984375 42.857406058749554,1.856689453125 42.84532460600695,1.922607421875 42.75665508107119,2.17529296875 42.675936163623234,1.7742919921875 42.57893488645347,1.724853515625 42.48988428106715,1.9610595703125 42.433149608450584,2.0050048828125 42.343891267993314,2.28515625 42.43720378992199,2.5213623046875 42.33577058019595,2.669677734375 42.352010907013636,2.6422119140625 42.41287476712602,2.9443359375 42.46962779961234,3.2080078125 42.433149608450584,3.3782958984375 43.11859042387546,4.0045166015625 43.43054621737345,4.98779296875 43.29476209935417,6.185302734375 42.901684498878645,7.5201416015625 43.502308880772006,7.5201416015625 43.78850742049093))")
      .woeType(YahooWoeType.COLLOQUIAL)
      .namesEdits(List(
        FeatureNameListEdit.newBuilder
          .editType(EditType.Add)
          .lang("en")
          .name("South of France")
          .flagsEdits(List(FeatureNameFlagsListEdit(EditType.Add, FeatureNameFlags.PREFERRED)))
          .result(),
        FeatureNameListEdit.newBuilder
          .editType(EditType.Add)
          .lang("en")
          .name("Southern France")
          .flagsEdits(List(FeatureNameFlagsListEdit(EditType.Add, FeatureNameFlags.ALT_NAME)))
          .result(),
        FeatureNameListEdit.newBuilder
          .editType(EditType.Add)
          .lang("fr")
          .name("le Midi")
          .flagsEdits(List(FeatureNameFlagsListEdit(EditType.Add, FeatureNameFlags.PREFERRED)))
          .result()
      ))
      .result(),
    GeocodeServingFeatureEdit.newBuilder
      .editType(EditType.Add)
      .longId(504403158265495555L)
      .cc("US")
      .center(GeocodePoint(37.776752824049225, -122.4591064453125))
      .wktGeometry("POLYGON((-123.4698486328125 38.72064181680791,-123.02764892578125 38.67777102071966,-122.607421875 38.551152506126876,-122.26409912109375 38.87904021269198,-121.97845458984375 38.43291711913096,-121.6680908203125 38.52107463539548,-121.66259765625 38.12243730691153,-121.7449951171875 38.02514028322668,-121.640625 37.841004114449625,-121.46759033203125 37.209311145302976,-121.30279541015625 37.036303655014166,-121.519775390625 37.00340948150988,-122.04437255859375 37.17868042336374,-122.14599609375 36.93099218606481,-122.43988037109375 37.108620693357075,-122.59918212890625 37.44954834133408,-122.607421875 37.74116171615771,-123.04412841796875 37.94720950779974,-123.5797119140625 38.64345588383863,-123.4698486328125 38.72064181680791))")
      .woeType(YahooWoeType.COLLOQUIAL)
      .namesEdits(List(
        FeatureNameListEdit.newBuilder
          .editType(EditType.Add)
          .lang("en")
          .name("Bay Area")
          .flagsEdits(List(FeatureNameFlagsListEdit(EditType.Add, FeatureNameFlags.PREFERRED)))
          .result()
      ))
      .result(),
    GeocodeServingFeatureEdit.newBuilder
      .editType(EditType.Add)
      .longId(504403158265495556L)
      .cc("IT")
      .center(GeocodePoint(40.63323310874385, 14.602857828140259))
      .wktGeometry("POLYGON((14.785194396972656 40.67579270463837,14.780044555664062 40.663553752795835,14.74090576171875 40.66615797322542,14.697990417480469 40.621351216046726,14.639968872070312 40.639069110576514,14.584693908691406 40.60336795917914,14.517745971679688 40.601021960168936,14.490966796875 40.620830030335945,14.391403198242188 40.60284663318139,14.365997314453125 40.60571387585085,14.352607727050781 40.62578113040264,14.387283325195312 40.62838682512982,14.376983642578125 40.61692100788684,14.396553039550781 40.61405424605027,14.473114013671875 40.627605127386545,14.483070373535156 40.63802701162223,14.514656066894531 40.62968963436869,14.5294189453125 40.61613917594868,14.571647644042969 40.624738824045586,14.602546691894531 40.64349784964656,14.6282958984375 40.65730320889177,14.679794311523438 40.64193479882107,14.710350036621094 40.67188690023149,14.734725952148438 40.68386397534434,14.7601318359375 40.69063267462732,14.785194396972656 40.67579270463837))")
      .woeType(YahooWoeType.COLLOQUIAL)
      .namesEdits(List(
        FeatureNameListEdit.newBuilder
          .editType(EditType.Add)
          .lang("en")
          .name("Amalfi Coast")
          .flagsEdits(List(FeatureNameFlagsListEdit(EditType.Add, FeatureNameFlags.PREFERRED)))
          .result(),
        FeatureNameListEdit.newBuilder
          .editType(EditType.Add)
          .lang("it")
          .name("Costiera Amalfitana")
          .flagsEdits(List(FeatureNameFlagsListEdit(EditType.Add, FeatureNameFlags.PREFERRED)))
          .result()
      ))
      .result()
  )

  val editsWrapper = GeocodeServingFeatureEdits(edits)

  def main(args: Array[String]) {
    if (args.size > 0) {
      val output = new FileOutputStream(new File(args(0)), false)
      val serializer = new TSerializer(new TReadableJSONProtocol.Factory(true))
      output.write(serializer.serialize(editsWrapper))
      output.close()
    }
  }
}